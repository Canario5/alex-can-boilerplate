services:
  dev:
    build:
      context: .
      target: dev
    ports:
      - "5173:5173"
    volumes:
      - .:/app
      - /app/node_modules
    environment:
      - NODE_ENV=development

  prod:
    image: alex-can-boilerplate-prod
    build:
      context: .
      target: prod
    ports:
      - "8080:8080"
    environment:
      - NODE_ENV=production

  trivy:
    image: aquasec/trivy:0.65.0@sha256:a22415a38938a56c379387a8163fcb0ce38b10ace73e593475d3658d578b2436
    volumes:
      - .:/app
      - /var/run/docker.sock:/var/run/docker.sock
      - ./trivy.yaml:/app/trivy.yaml
    working_dir: /app

