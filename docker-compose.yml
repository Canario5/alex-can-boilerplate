services:
  dev:
    build:
      context: .
      target: dev
    ports:
      - "5173:5173"
    volumes:
      - .:/app
      - /app/node_modules
    environment:
      - NODE_ENV=development

  prod:
    image: alex-can-boilerplate-prod
    build:
      context: .
      target: prod
    ports:
      - "8080:80"
    environment:
      - NODE_ENV=production

  trivy:
    image: aquasec/trivy:0.65.0
    volumes:
      - .:/app
      - /var/run/docker.sock:/var/run/docker.sock
      - ./trivy.yaml:/app/trivy.yaml
    working_dir: /app

